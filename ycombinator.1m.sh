#!/usr/bin/env bash

# <bitbar.title>YCombinator News</bitbar.title>
# <bitbar.version>v1.0</bitbar.version>
# <bitbar.author>Mark Phillips</bitbar.author>
# <bitbar.author.github>markedphillips</bitbar.author.github>
# <bitbar.desc>Lists the YCombinator News</bitbar.desc>
# <bitbar.image>https://github.com/markedphillips/ycombinator-bitbar/blob/master/ycombinator_screenshot.png</bitbar.image>
# <bitbar.dependencies>bash, lynx</bitbar.dependencies>

#Y="R0lGODdhJAAkANUAAAAAAP83AP8/AP9DAP9MAP9WAP9dAP9lEP9mAP9oFP1qAPxxAP5zEv9zPfd7AP58PPqDAP6DTP+DUfqIC/mLAv+LbvmOE/+OcP+RdP+We/+Yf/6Zb/+bg/ydc/+fif6kh/6njPqodf6ojPura/qvgPu3i/e4kfu8lPu+mP3BmfnDlv/VzfvWtfvWu//b1P7cxv7j2v7p0//q5v7v6P7y6//08v/15/748v///wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAADkALAAAAAAkACQAAAb/QIRwSCwaj8ikcslsOp/QqHRKdSYQhMGAYDgQr9kt4gptYDwczENBNJg5HkwjSsC4arVVR8FGGAYVK3guGARQBBkwODg1Jg59fiI1izAZhk8FESUvjCkWDAYGDBQoky8lEQVRCxAnkywjDwUFDyMsjCcQC1MGIJMxKRECAhIpMYwgBrwCFy43NC8dQh0vNDcuFwLKUgYPIS3PJRQUJdYtIbJVCgskMjctKirgMiQLkFQGGy82NP00Ni82bKuCpdixRTiASbhEkJYtGotowEpH0A+DCSdmLJpxYgKoikMMfJCxSMaHgSANBMhAEoeMDAFQVhygoaUMDQNAEhnAwSaHMJw6hfD0CTTo0JI/gwrlABEHjaRK66zot6KQUiFv0sy5CkaLITJXw4odS7as2SVBAAA7"
Y="iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAEGWlDQ1BrQ0dDb2xvclNwYWNlR2VuZXJpY1JHQgAAOI2NVV1oHFUUPrtzZyMkzlNsNIV0qD8NJQ2TVjShtLp/3d02bpZJNtoi6GT27s6Yyc44M7v9oU9FUHwx6psUxL+3gCAo9Q/bPrQvlQol2tQgKD60+INQ6Ium65k7M5lpurHeZe58853vnnvuuWfvBei5qliWkRQBFpquLRcy4nOHj4g9K5CEh6AXBqFXUR0rXalMAjZPC3e1W99Dwntf2dXd/p+tt0YdFSBxH2Kz5qgLiI8B8KdVy3YBevqRHz/qWh72Yui3MUDEL3q44WPXw3M+fo1pZuQs4tOIBVVTaoiXEI/MxfhGDPsxsNZfoE1q66ro5aJim3XdoLFw72H+n23BaIXzbcOnz5mfPoTvYVz7KzUl5+FRxEuqkp9G/Ajia219thzg25abkRE/BpDc3pqvphHvRFys2weqvp+krbWKIX7nhDbzLOItiM8358pTwdirqpPFnMF2xLc1WvLyOwTAibpbmvHHcvttU57y5+XqNZrLe3lE/Pq8eUj2fXKfOe3pfOjzhJYtB/yll5SDFcSDiH+hRkH25+L+sdxKEAMZahrlSX8ukqMOWy/jXW2m6M9LDBc31B9LFuv6gVKg/0Szi3KAr1kGq1GMjU/aLbnq6/lRxc4XfJ98hTargX++DbMJBSiYMIe9Ck1YAxFkKEAG3xbYaKmDDgYyFK0UGYpfoWYXG+fAPPI6tJnNwb7ClP7IyF+D+bjOtCpkhz6CFrIa/I6sFtNl8auFXGMTP34sNwI/JhkgEtmDz14ySfaRcTIBInmKPE32kxyyE2Tv+thKbEVePDfW/byMM1Kmm0XdObS7oGD/MypMXFPXrCwOtoYjyyn7BV29/MZfsVzpLDdRtuIZnbpXzvlf+ev8MvYr/Gqk4H/kV/G3csdazLuyTMPsbFhzd1UabQbjFvDRmcWJxR3zcfHkVw9GfpbJmeev9F08WW8uDkaslwX6avlWGU6NRKz0g/SHtCy9J30o/ca9zX3Kfc19zn3BXQKRO8ud477hLnAfc1/G9mrzGlrfexZ5GLdn6ZZrrEohI2wVHhZywjbhUWEy8icMCGNCUdiBlq3r+xafL549HQ5jH+an+1y+LlYBifuxAvRN/lVVVOlwlCkdVm9NOL5BE4wkQ2SMlDZU97hX86EilU/lUmkQUztTE6mx1EEPh7OmdqBtAvv8HdWpbrJS6tJj3n0CWdM6busNzRV3S9KTYhqvNiqWmuroiKgYhshMjmhTh9ptWhsF7970j/SbMrsPE1suR5z7DMC+P/Hs+y7ijrQAlhyAgccjbhjPygfeBTjzhNqy28EdkUh8C+DU9+z2v/oyeH791OncxHOs5y2AtTc7nb/f73TWPkD/qwBnjX8BoJ98VQNcC+8AAAAJcEhZcwAAFiUAABYlAUlSJPAAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAaMSURBVFgJlVdbq1VVFP7WXvucTireQkMTzSwJu9iRpII0rQdLNCSiCwXhW1BPdnkq+gEFvQQFPUlF0Y0CtYfICgIzK6MMQ01PKZzI+zl17nuvvm/MOdaee5+lHSfsNea4f3PMMedaOxu+f0GBttHBIqNWMlGNdB4k//90H4+dxnRdiFKfHMwTp5pUls5Tm4vN3cepbH3uNPjXLhampfOVtSTts0vRX9w2ADKbaFiQ6qetMaKHD8lMGHQSm1qrTO3cXmL5OK9JrIjFiXpX0zAAMptomJHqV4hnAJu7R9SVfSW9B5WPZ3ZKXRlPshjTpppLFGlgEHrIDKKD+2XOkxqoJhM26CY+Dz8FEQjTyz7lZT9BAROaPddugMXLNgJJpoodAJkuGkRiDpaMgZrjQNd0oGc2xXQZHQDGzsdkdHBQlNgQ8K4ZtJ9DHYGNnAUmhoKveAcj4zJfYCpOWYTsSSKY4nwfcJBOWvRixpm5BGiMtlZtq1dQjrwHGDqG4sDRkPAqkllXA+P/AjWm9NhOzSk8AiDD4EAIWah9G+rTUAz2oXb9RmSbe4F6F4qD36E4ugvoXkhD+jkY74exc8C81cjv22C65uH9wG87gZlLY6VC65Y53O/CWxbBgeXVVnFh6O5B/dEnUbtyERq/7MP4SweAwT+ZZBlX/g8XEHskvwzFmX50Pfsi6us3oTh7EmMvPIEmQ2V5NwEpWDI6tixAVX4ftlq3onpsANnC5Wh+9TGaP+4xq/ym1aiteQwFcaDJflHTyq/G6g3+gezWTaivvddsG99/Q9/PkM2/mb3HXpJtOVTdkrFJANQmi2B8fxsj7AmubBoX9+7LaB5nX3DkGx5ENm8eq9cXekbNyuqAu1V/+GnO62ie7MfEm88D2tmJ4VZy3+IOMIobAHlBJPG57WtYNYZPIlu8EsXefWjs+UJWyFesQm3t1lglnUL22rkjqN25BfU77jGbxte7UPx8hMBvYXXOMFuspPeMqM/NwwFFZhLxFWj1E6MExYP14Sto9h0y03zjI8h4E2D4eDjmpwn0oadCdf46gcb2bcium089wWRdk8JXCSq2LJr5lllv8DCOnOLJWYVi/yE0vtxhRvmKXtTu2oZCp//UAdTWP4D6betMN7HrPRR9vK+mE5DdQaxGGjOm6STVgNwxtdYpGj2PbPkcND54Bs3Dv5o23/w476QrgBNJ7xz/HY13nkO2bEmsTrhdynDaJuWoGNWAUgef63Tofpm1FMUxLvrzjxiuYC/1Ilu5BdnadchXr7EUE59sB1gcdF1OE96kZQwC0RAWySpG1vpAM6vJJr4SD6oThxzF6WPofv0H5DesQuPb3ShGhlBft8kqN7r1Rh7zayZv1eToHRJ/l5nYESelTFfi26iLbcYigHdQY8fbBNSL/Pa7yeidwjvy/TeMhtOaLNL9Q3lo4zqncsvisQ8h4lPA4s/LalWiTLTGCg39jezaFeylV9H4aW/w473T2L8HzZ2vheroveW3t4XToz15cJS8Nap7qKUPICxgItQLN+cxZlEauz+lQonI7niLnS2Wt7cWZWKnsmhPLknnCO2fArdqJGZeJRN5QNIm0fBixigr4f4DfDXoujFAMYa7GBuAt3/8UZbkCIBSp0QZQyoDfzRKP6y0HSoEt6pceBe304oTC1/G9UmkRnzuupAt2bKIPsirn/ZZ6yqtjHO9xt2VL1pbj1fZ5c676wWpf1O3GShK588NPIN4onE2qaqL3MNoWQSPK6lbOg0eYcvavErvYJE+k8QWUPXVe258jFsXXpxt3iXjE6cK6nOnQZYAkkCjHXGQ6Zk6iicaXT119o16R4P9pN3JHLhCmZtPPLaEqawVOwHkBi2lcoThgdyGUj9lQwMo+N2DGgGO8MSxUBd6T7UvyvM4VaYCFa8OTy6DZBiW6GxlYOYmP9565gJz+V2iUpw6yvcdr/DO7562aiim4vjinEre9uqQYAoj7Al9uV/276IfRf9hc8xm829Prhcq+0pJ3XYKYd0kbFk7SNe1qBbkfWGUDrqHtG1ds5EtWBRsxwcp40XktqGBtHDDVwYUr5EWKkjSP4pRUgaLvBGPIIbz8m92BKXPUxvk5a/K+BCvxDbixIjPS6VZJE3drogRKgjtyhubiW0B6mQfLnP+Umjl274qgIPVyvUT71T2LtfcbTXnsGp1yIKm8skaT2UooYYCd4JJ5Zp3DKug+3foKtgpAupcYSdfEblNNHX7/wBEyE8dyiBdYgAAAABJRU5ErkJggg=="
lynx="/usr/local/bin/lynx"

echo "|dropdown=false image=$Y"
echo "---"

if [[ -x $lynx ]]; then
  echo "Refresh articles|refresh=true image=$Y"
  echo "---"
  echo " |trim=false"
  $lynx -dump https://news.ycombinator.com/news | grep -v ycombinator | grep http | awk '{print $2}' # | font=Avenir size=14 trim=false
  echo " |trim=false"
else
  echo "Lynx is not installed|color=red"
  echo "|trim=false"
  echo "Please install it via Homebrew using this command"
  echo "brew install lynx|font=Courier color=green"
  echo "Then refresh your Bitbar (Preferences â–¶ Refresh all)"
fi
